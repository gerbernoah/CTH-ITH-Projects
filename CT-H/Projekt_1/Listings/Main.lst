C51 COMPILER V9.60.0.0   MAIN                                                              12/08/2021 14:47:51 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\Main.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\Main
                    -.lst) TABS(2) OBJECT(.\Objects\Main.obj)

line level    source

   1          /* 
   2           * Created:   Mi Nov 17 2021
   3           * Processor: 80C31
   4           * Compiler:  Keil for 8051
   5           */
   6          
   7          #include <reg51.h>
   8          #include <stdio.h>
   9          
  10          unsigned int codes[4][3] = {
  11            { 9, 0, 3 },
  12            { 2, 4, 7 },
  13            { 5, 1, 2 },
  14            { 1, 6, 3 }
  15          };
  16          
  17          sfr input = 0x90;
  18          sfr output = 0xA0;
  19          
  20          sbit input_submit = P3^2;
  21          sbit dip_submit = P3^3;
  22          
  23          sbit led_true = P3^0;
  24          sbit led_false = P3^1;
  25          
  26          int selected_index;
  27          unsigned int input_count;
  28          unsigned int error_count;
  29          unsigned int real_digit;
  30          
  31          void Check();
  32          void Show(int);
  33          int GetIndex();
  34          int GetSelectedDigit();
  35          
  36          void main()
  37          { 
  38   1        led_false = led_true = input_count = error_count = output = 0; //reset variables and outputs
  39   1      
  40   1        while (dip_submit) { } // stay here if no code is selected
  41   1        selected_index = input >> 4; //return dip state
  42   1      
  43   1        while (1)
  44   1        {
  45   2          while (input_submit)
  46   2          {
  47   3            output = input; // set output to input
  48   3          }
  49   2          Check(); // check if input was successful
  50   2        }
  51   1      }
  52          
  53          void Check()
  54          { 
C51 COMPILER V9.60.0.0   MAIN                                                              12/08/2021 14:47:51 PAGE 2   

  55   1        if (input_count < 3)
  56   1        {
  57   2          real_digit = codes[selected_index][input_count];
  58   2      
  59   2          if (output != real_digit) // increment error count if code wrong
  60   2            error_count++; 
  61   2        }
  62   1      
  63   1        if (input_count == 2)
  64   1        {
  65   2          led_false = (error_count > 0);
  66   2          led_true = (error_count == 0);
  67   2          
  68   2          while (1); // stay here forever
  69   2        }
  70   1        
  71   1        input_count++; // increment input count
  72   1        while (!input_submit); //wait until submit released
  73   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    142    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     32    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
